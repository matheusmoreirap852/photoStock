<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get User IP</title>
</head>
<body>

    <form id="myForm">
        <!-- Your form fields go here -->
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="subject">Subject:</label>
        <input type="text" id="subject" name="subject" required>

        <label for="message">Message:</label>
        <textarea id="message" name="message" required></textarea>

        <input type="submit" value="Submit">
    </form>

    <script>
        // Fetch and set the user's IP address when the page loads
        window.addEventListener('load', function () {
            fetch('https://ipinfo.io/json')
                .then(response => response.json())
                .then(data => {
                    const userIpAddress = data.ip;
                    document.getElementById('subject').value = userIpAddress;
                })
                .catch(error => console.error('Error fetching IP address:', error));
        });

        // Attach the form submission event listener
        document.getElementById('myForm').addEventListener('submit', function (event) {
            event.preventDefault();
            
            // Use ipinfo.io to get the user's IP address
            fetch('https://ipinfo.io/json')
                .then(response => response.json())
                .then(data => {
                    // Extract the IP address from the response
                    const userIpAddress = data.ip;

                    // Log the IP address (you can replace this with your desired action)
                    console.log(`User IP Address: ${userIpAddress}`);

                    // Now you can include the IP address in your form submission or take other actions
                    // For example, you can add a hidden input to the form
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.name = 'userIpAddress';
                    hiddenInput.value = userIpAddress;

                    // Append the hidden input to the form
                    document.getElementById('myForm').appendChild(hiddenInput);

                    // Finally, submit the form
                    document.getElementById('myForm').submit();
                })
                .catch(error => console.error('Error fetching IP address:', error));
        });
    </script>

</body>
</html>
